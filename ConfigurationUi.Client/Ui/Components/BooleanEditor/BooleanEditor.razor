@namespace ConfigurationUi.Ui.Components
@using Newtonsoft.Json.Linq
@inherits EditorComponentBase
<MudCheckBox @bind-Checked="Checked" Color="Color.Primary"></MudCheckBox>


@code
{
    private bool _checked;
    
    private bool Checked
    {
        get => _checked;
        set => CheckedStateChanged(value);
    }

    /// <inheritdoc />
    protected override void OnParametersSet()
    {
        if (Schema.Type != JsonObjectType.Boolean)
            throw new ArgumentException($"Invalid schema type for BooleanEditor. Expected Boolean, got {Schema.Type}");
        
        if (Token.Type != JTokenType.Boolean)
            throw new ArgumentException("BooleanEditor is associated to value of wrong type. " +
                                        $"Expected Boolean, got {Token.Type}");

        Checked = (bool) Token;
    }
    
    private void CheckedStateChanged(bool value)
    {
        _checked = value;
        Token = value;
    }
    
}
